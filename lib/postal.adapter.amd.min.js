/*
  Cartographer.js
  Author: Alex Robson <@A_Robson>
  License: MIT ( http://www.opensource.org/licenses/mit-license )
  Version: 0.2.0
*/
define(["postal","cartographer"],function(a,b){var c,d;c=function(){function c(){var b;b=this,a.subscribe("cartographer","api",function(a,c){var d;return d=a.operation,b[d](a)})}return c.prototype.apply=function(c){var d,e,f;return e=c.name,f=c.template,d=c.model,b.apply(e,f,d,function(b,c,d){return a.publish("cartographer","render."+f,{template:f,markup:c,operation:"render"})},function(b){return a.publish("cartographer","render."+b,{template:f,error:b,operation:"render"})})},c.prototype.map=function(a){return b.map(a.name)},c.prototype.resolver=function(a){return a.order==="prepend"?b.resolver.prependSource(a.resolver):b.resolver.appendSource(a.resolver)},c.prototype.add=function(c){var d,e,f;return f=c.template,d=c.id,e=c.model,b.add(f,d,e,function(b,c,e){return a.publish("cartographer","render.{templateId}",{template:f,parent:d,markup:c,operation:"add"})})},c.prototype.update=function(c){var d,e,f;return f=c.template,d=c.id,e=c.model,b.update(f,d,e,function(b,c,e){return a.publish("cartographer","render.{templateId}",{template:f,id:d,markup:c,operation:"update"})})},c}(),d=new c})