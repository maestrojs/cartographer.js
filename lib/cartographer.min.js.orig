(function(a){var b,c;b=function(){var a,b,c;return b=this,c=[],a=function(a){var b,c;return c=$("#"+a+"-template > :only-child"),b=$("#"+a),c.length>0?c[0]:b.length>0?b[0]:null},this.addSource=function(a){return c.push(a)},this.resolve=function(b,d,e){var f,g,h;return h=a(b),h?d(h):(g=0,f=function(){return c[g].resolve(b,function(a){return d($(a)[0],function(){return g++,f()})})})},b},c=new b;var d;d=function(){var a;return a=this,postal.channel("cartographer").subscribe(function(b){if(b.map)return a.map(b.name,b.namespace);if(b.apply)return a.apply(b.template,b.proxy,b.render,b.error)}),this.templates={},this.map=function(a,b){var c;return c=new Template(a,b),this.templates[a]=c},this.apply=function(a,b,c,d){var e;a=a||(a=b.__template__),e=this.templates[a];if(e)return e.apply(b,function(a){return c?c(a,e.fqn):$("#"+e.name).replaceWith(a)});if(d)return d()},a},a.cartographer=new d,!1})(window)